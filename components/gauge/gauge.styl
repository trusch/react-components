@import '../../variables/variables.styl'

$scale-width = 11px

.gauge-container
    position relative
    width: 100%
    margin: 0 auto 0
    overflow: hidden

    &:before
        content: ""
        display: block
        padding-top: 100%

    .gauge-stepper 
        position:  absolute
        top: 5%
        left: 0
        bottom: -5%
        right: 0

        .gauge-value
            position absolute
            top: 0
            left: 0
            width: 100%
            height: 100%
            text-align: center
            z-index: 4

            .current
                margin: 30% 0 0
                color $scale-active-color
                font-weight: bold

            .threshold
                margin: 0
                color: white

        .gauge-target
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%

            svg
                position: absolute
                left: "calc(50% - %s)" % 5px
                bottom: -5px

                path
                    fill: $primary-white

        .gauge-circle 
            position: relative
            width: 100%
            height: 100%
            background-color: $scale-bg-color
            border-radius: 50%
            
            &:before, &:after
                content: ''
                position: absolute
                border-radius: 50%
                z-index: 4

            &:before
                top: $scale-width
                left: $scale-width
                s = $scale-width * 2
                width: "calc(100% - %s)" % s
                height: "calc(100% - %s)" % s
                background-color: $bg-color-default

            &:after
                width: "calc(100% + %s)" % 1px
                height: "calc(100% + %s)" % 1px
                border-style: solid
                border-width: "calc(2px + %s)" % $scale-width
                border-color: transparent transparent $bg-color-default transparent

        .gauge-spinner 
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%
            border-width: $scale-width
            border-style: solid
            border-color: transparent transparent $scale-active-color transparent
            border-radius: 50%
            transform: rotate(0deg)
            z-index: 3

        .cap 
            position: absolute
            bottom: 14.4%
            width: $scale-width
            height: "calc(%s / 2)" % $scale-width
            background-color: $bg-color-default
            overflow: hidden
            z-index: 4

            &.left 
                left: 14.4%
                transform: rotate(135deg)

            &.right 
                right: 14.4%
                transform: rotate(-135deg)

            .semi, .fill
                position: absolute
                top: 0
                width: $scale-width
                height: $scale-width
                border-radius: 50%

            .semi
                background-color: $scale-bg-color

                &.left
                    left: 0

                &.right
                    right: 0

            .fill
                top: 1px

                &.left
                    left: 0
                    background-image: linear-gradient($scale-active-color 0%, transparent 0%)

                &.right 
                    right: 0
                    background-image: linear-gradient(transparent 50%, $scale-active-color 0%)


/* keep font-sizes responsive within the given grid */

@media screen and (min-width: 0px)
  .gauge-value
      .current
        font-size: 6vw
        line-height: 7vw

      .threshold
        font-size: 3vw
        line-height: 4vw

@media screen and (min-width: 480px)
  .gauge-value
      .current
        font-size: 5vw
        line-height: 6vw

      .threshold
        font-size: 3.5vw
        line-height: 3.5vw

@media screen and (min-width: 768px)
  .gauge-value
      .current
        font-size: 2.5vw
        line-height: 3vw

      .threshold
        font-size: 1.75vw
        line-height: 1.75vw

@media screen and (min-width: 1200px)
  .gauge-value
      .current
        font-size: 1.5vw
        line-height: 1.75vw

      .threshold
        font-size: 1vw
        line-height: 1vw
